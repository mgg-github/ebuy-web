define("home/widget/portal",["home/widget/scroller"],function(require){"use strict";var t=require("home/widget/scroller"),e=require("conf"),i=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null},t),this.init()},init:function(){this.scrollers=[],this.isWide=pageConfig.wideVersion,this.getElements(),this.initScroller(),this.initEvent(),this.initQrcode()},getElements:function(){var t=this.conf.$el;this.$scrollContainer=t.find(".J_pt_logo"),this.$qrcode=t.find(".J_pt_qrcode")},initEvent:function(){_.eventCenter.on("home:resize",$.proxy(function(t){this.isWide!==t&&(this.isWide=t,this.scrollers.forEach(function(e,i){e.reset({itemWidth:t?95:78})}))},this))},initScroller:function(){var e=this.isWide?95:78,i=this.$scrollContainer;if(i.length){var n=this;i.each(function(i){var o=$(this);n.scrollers[i]=new t({$container:o,$scroller:o.find(".J_pt_logo_list"),scrollItem:".J_pt_logo_item",btnWrapper:".J_pt_logo_btn_wrapper",nextBtn:".J_pt_logo_next",prevBtn:".J_pt_logo_pre",itemWidth:e,onInitStyle:function(t,e,i){this.$container.find(this.btnWrapper).hide(),t.last().css("border-right","0")},onMouseEnter:function(t){t.find(this.btnWrapper).show()},onMouseLeave:function(t){t.find(this.btnWrapper).hide()}})})}},qr_colormap:{22:"4",23:"5",24:"6",25:"7",26:"8",27:"9",28:"10",30:"11",31:"12",32:"13",33:"14",34:"15",35:"16",36:"17",37:"18"},initQrcode:function(){if(this.$qrcode.length){var t=this,i=null;this.$qrcode.each(function(n,o){var r=$(this),s=$(".J_pt_qrcode_img",r),c=r.attr("data-id"),l=s.length,h=[],a=[];s.each(function(){var t=this.getAttribute("data-url");a.push(t),t.replace(/[^_]+$/,function(t,e){h.push(t)})}),a=a.join(";"),h=h.join(";"),r.bind("mouseenter",function(){this.loaded||(this.loaded=!0,s.each(function(i,n){var o=[e.INTERFACE.QRCODE+n.getAttribute("data-url"),pageConfig.isRetina?"160":"80",t.qr_colormap[c],"4-0.png?v=1"].join("-");n.setAttribute("src",o)})),i=(new Date).getTime()}),r.bind("mouseleave",function(){var t=(new Date).getTime()-i;t<1e3||log("pc_homepage","qr_floor",readCookie("__jdv"),h,l,a,(t/1e3).toFixed(2))})})}}});return i});