define("home/widget/head",["//taotao.com/jdf/1.0.0/ui/dropdown/1.0.0/dropdown.js","//taotao.com/jdf/1.0.0/ui/dialog/1.0.0/dialog.js","//taotao.com/jdf/1.0.0/unit/login/3.0.0/login.js","//taotao.com/jdf/1.0.0/unit/event/1.0.0/event.js","//taotao.com/jdf/1.0.0/unit/hotkey/1.0.0/hotkey.js","//taotao.com/jdf/1.0.0/unit/globalReco/1.0.0/globalReco.js","//taotao.com/jdf/1.0.0/unit/cookie/1.0.0/cookie.js","//taotao.com/jdf/1.0.0/unit/search/1.0.0/search.js","//taotao.com/jdf/1.0.0/unit/localStorage/1.0.0/localStorage.js","//taotao.com/jdf/1.0.0/unit/log/1.0.0/log.js","home/widget/head_areamini","home/widget/head_myjd","home/widget/head_setUserinfo","home/widget/head_shoppingcart"],function(require,exports,module){var t=require("conf"),i=require("load_async"),e=(require("jdf/1.0.0/unit/log/1.0.0/log.js"),require("jdf/1.0.0/unit/cookie/1.0.0/cookie.js")),a=(require("jdf/1.0.0/ui/dropdown/1.0.0/dropdown.js"),require("jdf/1.0.0/unit/localStorage/1.0.0/localStorage.js")),n=function(){};n.prototype._loadingText='<div class="dd-spacer"></div><div class="dd-inner"><span class="loading"></span></div>',n.prototype.init=function(){require("//taotao.com/jdf/1.0.0/unit/search/1.0.0/search.js");var t=$("#key");$("#shortcut").bind("mouseenter",function(){t.blur()}),this._initHotkey(),this._initHotwords(),this._initSearchFix(),this._initShoppingcart(),this._initAreamini(),this._initMyjd(),this._initSetUserInfo(),this._initMobile(),this._initService(),this._initSiteNav();var i=$("#ttbar-mycity .ui-areamini-text-wrap");i.prepend('<i class="iconfont">&#xe604;</i>')},n.prototype._initHotkey=function(){var t=require("//taotao.com/jdf/1.0.0/unit/hotkey/1.0.0/hotkey.js");t()},n.prototype._initHotwords=function(){i({url:t.INTERFACE.HOT_WORDS,params:{pin:pageConfig.user.pin,uuid:pageConfig.user.uuid},dataType:"jsonp",scriptCharset:"utf-8",cache:!0,jsonpCallback:"jsonCallBackHotWords"}).then(function(t){if(t&&"object"==typeof t){var i=t.data,e="",a=[],n=0,o=0,s=$("#search #key");if($.each(i,function(t,i){if(i.n)if(2==i.c&&n++<10)a.push(i.n);else if(o<9){var s=1==i.c?'class="style-red"':"";e+='<a href="'+i.u+'" target="_blank" '+s+' clstag="h|keycount|2016|03b0'+(1+t)+'">'+i.n+"</a>",o++}}),$("#hotwords").html(e),a.length){var c,d,r,l=0,h=a.length;r=function(t){clearTimeout(d),t&&(c=a[l],s.val(c),d=setTimeout(function(){l=(l+1)%h,r(!0)},3e3))},s.bind("focus",function(){r(!1),s.val()==c&&s.val("").css("color","#333")}).bind("blur",function(){s.val()||(r(!0),s.val(c).css("color","#999"))}),r(!0)}}})},n.prototype._initSearchFix=function(){var t,i=function(t,i){var e=!1,a=!1;return function(){return e?void(a=!0):(e=!0,setTimeout(function(){e=!1,a&&(t(),a=!1)},i),void t())}},e=$(window);t=function(){this.opts={},this.$el,this._state=0},t.prototype._judge=function(){e.scrollTop()>this.opts.offset&&0==this._state?(this._state=1,this.$el.addClass("search-fix")):e.scrollTop()<=this.opts.offset&&1==this._state&&(this._state=0,this.$el.removeClass("search-fix"))},t.prototype._bind=function(){var t=this;e.bind("scroll.searchFix",i(function(){t._judge()},100))},t.prototype.init=function(t){$.extend(this.opts,{offset:788},t),this.$el=$(this.opts.el),this._judge(),this._bind()},(new t).init({el:"#search",offset:660})},n.prototype._initShoppingcart=function(){var t=require("home/widget/head_shoppingcart");t()},n.prototype._initAreamini=function(){var t=(require("home/widget/head_areamini"),'      <div class="dt cw-icon ui-areamini-text-wrap" style="display:none;">        <i class="ci-right"><s>◇</s></i>        <i class="ci-left"></i>        <span class="ui-areamini-text"></span>       </div>      <div class="dd dorpdown-layer">        <div class="dd-spacer"></div>        <div class="ui-areamini-content-wrap">           <div class="ui-areamini-content"></div>         </div>       </div>');$("#ttbar-mycity").html(t).areamini({hasCssLink:!1,className:{hover:"hover",selected:"selected"},provinceList:[{name:"海外",tpl:'<div class="item"><a href="//en.taotao.com/" target="_blank" data-onchange="1"><%=name%></a></div>'}],tplContentWrap:'<div class="ui-areamini-content-list"><%=list%></div>',tplContentItem:'<div class="item"><a data-id="<%=id%>" href="javascript:void(0)"><%=name%></a></div>',syncServer:!0,writeCookie:!1,threeWordDeal:function(t){var i=t.find(".ui-areamini-text").html(),e=t.find(".dd-spacer");3==i.length?e.addClass("dd-spacer-extend"):e.removeClass("dd-spacer-extend")},onReady:function(t){this.el.find(".ui-areamini-text-wrap").show();var i=e("areaId");if(a.check()&&i){var n="areaId";a.get(n)?a.get(n)!=i&&(a.set(n,i),a.clearByReg("^jd_home_2015_")):a.set(n,i)}this.options.threeWordDeal(this.el)},onChange:function(t,i,e){this.options.threeWordDeal(this.el),"undefined"!=typeof i&&window.location.reload()}})},n.prototype._initMyjd=function(){var t=require("home/widget/head_myjd");t()},n.prototype._initSetUserInfo=function(){var t=require("home/widget/head_setUserInfo");new t({$userName:$("#ttbar-login")}).init()},n.prototype._initMobile=function(){var t=$("#J_mobile"),i=$("#J_mobile_pop"),e=!1,a=null;t.bind("mouseenter",function(n){clearTimeout(a),a=setTimeout(function(){t.addClass("mobile_on"),e||(e=!0,seajs.use("home/widget/mobile_pop",function(t){t({$el:i})}))},200)}),t.bind("mouseleave",function(i){clearTimeout(a),t.removeClass("mobile_on")})},n.prototype._initService=function(){$("#ttbar-serv .dd").html(this._loadingText),$("#ttbar-serv").dropdown({enterDelay:50,trigger:!0,current:"hover",onchange:function(t){t.attr("data-load")||(t.attr("data-load",1),i({url:"//dc.3.cn/client/get",backup:"//d.taotao.com/client/get",dataType:"jsonp",scriptCharset:"UTF-8",cache:!0,jsonpCallback:"getClientCallback"}).then(function(t){if(t&&"object"==typeof t){t=t.data;var i='<div class="dd-spacer"></div>',e=['<div class="item-client">客户</div>'],a=['<div class="item-business">商户</div>'];$.each(t,function(i){var n=t[i],o=!n.type;0==n.c&&e.push('<div class="item"><a href="'+n.u+'" target="_blank" '+o+">"+n.n+"</a></div>"),1==n.c&&a.push('<div class="item"><a href="'+n.u+'" target="_blank" '+o+">"+n.n+"</a></div>")}),i+=e.join(""),a.length>1&&(i+=a.join("")),$("#ttbar-serv .dd").html(i)}}))}})},n.prototype._initSiteNav=function(){$("#ttbar-navs .dd").html(this._loadingText),$("#ttbar-navs").dropdown({enterDelay:50,trigger:!0,current:"hover",leaveDelay:100,onchange:function(t){t.attr("data-load")||(t.attr("data-load",1),i({url:"//dc.3.cn/navigation/get",backup:"//d.taotao.com/navigation/get",dataType:"jsonp",scriptCharset:"UTF-8",cache:!0,jsonpCallback:"getNavigationCallback"}).then(function(t){if(t&&"object"==typeof t){t=t.data;var i='<div class="dd-spacer"></div>';$.each(t,function(e){var a=t[e],n=a.s,o="";$.each(n,function(t){var i=n[t],e=i.c?'class="'+i.c+'"':"";o+='<div class="item"><a href="'+i.u+'" target="_blank" '+e+">"+i.n+"</a></div>"});var s=a.n,c=a.c?'class="'+a.c+'"':"";a.u&&(s='<a href="'+a.u+'" target="_blank" '+c+">"+a.n+"</a>"),i+='<dl class="fore'+(e+1)+'">                    <dt>'+s+"</dt>                    <dd>"+o+"</dd>                  </dl>"}),$("#ttbar-navs .dd").html(i)}}))}})},module.exports=new n});